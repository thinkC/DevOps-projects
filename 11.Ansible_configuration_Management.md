

## Step 1 - Install and Configure Ansible on EC2 Instance

We currently have the below setup
![servers](./img-lb-nginx/img-serverlist.png)

1. First we update the Name tag for our Jenkins server to be Jenkins-Ansible . This will be used to run playbooks.
2. We create a new repo named `ansible-config-mgt`
![github](./img-ansible/img2.png)

<code style= color:red>Note</code>: In other not to be changing our `Jenkins-Ansible` instance IP everytime we reboot or stop the install since the IP address will change as a result, we will configure our instance to use an [Elastic IP](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html).
## Creating Elastic IP
1. Click on Elastic IP
2. Click on Allocate Elastic IP
3. Click Allocate . This then creates a static IP Address
4. Select the Elastic IP address that is allocated, click action and choose Associate Elastic IP
5. Next choose the EC2 instance you want to associate the Elastic IP with

![elastic IP](./img-ansible/img3.png)
6. Click Associate.

![elastic IP](./img-ansible/img4.png)

![elastic IP](./img-ansible/img5.png)

3. Install Ansible

```bash
sudo apt update
sudo apt install ansible
```
We check version of ansible installed.

`ansible --version`

output

```bash
ubuntu@ip-172-31-62-121:~$ ansible --version
ansible 2.9.6
  config file = /etc/ansible/ansible.cfg
  configured module search path = ['/home/ubuntu/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  executable location = /usr/bin/ansible
  pytho
  n version = 3.8.10 (default, Jun  2 2021, 10:49:15) [GCC 9.4.0]
```
4. Next, we configure our Jenkins build job to save our repository content every time will make changes to our repo.
Next, we create a freestyle project named `ansible` and point it to our `ansible-config-mgt` repo.

![Ansible-freestyle](./img-ansible/img6.png)